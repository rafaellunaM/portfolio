<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles/index_style.css">
    <script src="./scripts/trocar-images.js"></script>
    <script src="./scripts/tool-box.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="styles/loading.css">
    <link rel="stylesheet" href="styles/study.css">
    <title>Rafael</title>
</head>
<body>
    <nav class="menu-lateral">
        <div class="btn-expandir">
            <i class="bi bi-list" id="btn-exp"></i>
            <i class="bi bi-x" id="btn-close"></i>
            </div>
            <ul class="list">
                <li class="item-menu  ativo">
                    <a href="./index.html">
                        <span class="icon"><i class="bi bi-house"></i></span>
                        <span class="txt-link">Home</span>
                    </a>
                </li>
                <li class="item-menu">
                    <a href="./study.html">
                        <span class="icon"><i class="bi bi-book"></i></span>
                        <span class="txt-link">Estudos</span>
                </a>
                </li>
                <li class="item-menu">
                    <a href="worker.html">
                        <span class="icon"><i class="bi bi-wrench"></i></span>
                        <span class="txt-link">Trabalhos</span>
                    </a>
                </li>
                <li class="item-menu">
                    <a href="contacts.html">
                        <span class="icon"><i class="bi bi-person-lines-fill"></i></span>
                        <span class="txt-link">Contatos</span></a>
                </li>
            </ul>
        </nav>
        <script src="./scripts/menu.js"></script>
    <main>
        <p>
            POSTGRESQL - ADMINISTRATION
default port: 5432
default user: postgres
default password: postgres
default db: postgres

Access database: psql -U postgres -h 127.0.0.1 -p 5432 -d <your_database_name>

USERS COMMANDS:

list users: \du
create users: CREATE USER your_username WITH PASSWORD 'your_password';
Apenas um AS p/ CREATE ROLE
delete a user: DROP USER [IF EXISTS] your_username;
new password: ALTER USER your_username WITH PASSWORD 'new_password';
superuser privileges: ALTER USER your_username WITH SUPERUSER;
remove superuser privileges: ALTER USER your_username WITH NOSUPERUSER;
alter name user: ALTER USER old_username RENAME TO new_username;
privileges for a database: GRANT permission(s) ON DATABASE database_name TO user_or_role;

DATABASES COMMANDS:
cria database: CREATE DATABASE mydatabase;
delete database: DROP DATABASE IF EXISTS your_database_name;
select database: \c
list databases: \l


TABLES COMMANDS:
list tables: \dt
list user and privileges a table: \dp
alter table owner: ALTER TABLE table_name OWNER TO new_owner;
permissions for tables: GRANT <privileges> ON <tables> IN SCHEMA <schema> TO <roles>; or GRANT <permission> PRIVILEGES ON TABLE table_name TO user_or_role;
revoke privileges: REVOKE permission(s) ON TABLE table_name FROM user_or_role;


SERVER COMMANDS:
exit: \q
Backup database file custom: pg_dump -Fc -U your_username -h your_host -p your_port -d your_database --schema=public > your_backup_file.dump
Restore database file custom: pg_restore -U your_username -h your_host -p your_port -d your_database -Fc your_backup_file.dump

GROUPS COMMANDS:
create a group: CREATE GROUP group_name;
delete a group: DROP GROUP IF EXISTS group_name;
add user in group: ALTER GROUP mygroup ADD USER myuser;
delete user in group: ALTER GROUP group_name DROP USER username;


ROLES:
CREATE ROLE nome [ [ WITH ] opção [ ... ] ]
onde opção pode ser:
      SUPERUSER | NOSUPERUSER
    | CREATEDB | NOCREATEDB
    | CREATEROLE | NOCREATEROLE
    | INHERIT | NOINHERIT
    | LOGIN | NOLOGIN
    | REPLICATION | NOREPLICATION
    | BYPASSRLS | NOBYPASSRLS
    | CONNECTION LIMIT limite_de_conexões
    | [ ENCRYPTED ] PASSWORD 'senha' | PASSWORD NULL
    | VALID UNTIL 'carimbo_de_tempo'
    | IN ROLE nome_da_role [, ...]
    | IN GROUP nome_da_role [, ...]
    | ROLE nome_da_role [, ...]
    | ADMIN nome_da_role [, ...]
    | USER nome_da_role [, ...]
    | SYSID uid
listar o conjunto de funções de banco de dados existentes e seus atributos: SELECT rolname, rolcanlogin, rolcreatedb FROM pg_roles;
alterar nome da role: ALTER ROLE old_role_name RENAME TO new_role_name;
role delete: DROP ROLE IF EXISTS role_name;
Create user using role: CREATE ROLE new_role_name WITH LOGIN PASSWORD 'password';  permite a penas acessar o server e os databases

EXAMPLE:
CREATE ROLE gerente;
CREATE ROLE atendente;
GRANT ALL PRIVILEGES ON ALL TABLES IN SCHEMA public TO gerente;
GRANT INSERT, UPDATE, SELECT ON cliente, estaciona, veiculo TO atendente;
DROP ROLE	 fulano;  
ERROR: role “fulano” cannot be dropped because some objects depend on it. DETAIL: privileges for table cliente; privileges for table …
REVOKE ALL PRIVILEGES ON ALL TABLES IN SCHEMA public FROM fulano;
“REVOKE”[
DROP ROLE  fulano;
“DROP ROLE”

REF:
https://halleyoliv.gitlab.io/pgdocptbr/user-manag.html. 
https://www.youtube.com/watch?v=GwmUzy0TLW4. 
        </p>
    </main>
    <footer>
  
        <div>
            <p>Contatos: </p>
            <ul class="redes_sociais">
                <li>
                    <a href="https://github.com/rafaellunaM" target="_blank" onmouseover="trocarImagem(this, '/imagens/icons8-github-orange.png')" onmouseout="trocarImagem(this, '/imagens/icons8-github-white.png')">
                        <img src="/imagens/icons8-github-white.png" alt="GitHub Icone"> GitHub
                    </a>
                </li>
                <li>
                  <a href="https://www.instagram.com/rafael_migueel_/" target="_blank" onmouseover="trocarImagem(this, '/imagens/icons8-instagram-orange.png')" onmouseout="trocarImagem(this, '/imagens/icons8-instagram-white.png')">
                    <img src="/imagens/icons8-instagram-white.png" alt="Instagram Icone"> Instagram
                  </a>
                </li>
                <li>
                  <a href="https://www.linkedin.com/in/rafael-miguel-luna/" target="_blank" onmouseover="trocarImagem(this, '/imagens/icons8-linkedin-orange.png')" onmouseout="trocarImagem(this, '/imagens/icons8-linkedin-white.png')">
                    <img src="/imagens/icons8-linkedin-white.png" alt="Linkedin Icone">linkedin
                  </a>
                </li>
              </ul>               
        </div>
        <p>&copy; 2023 Rafael Miguel Luna. Todos os direitos reservados.</p>
    </footer>
</body>
</html>